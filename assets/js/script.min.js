const $=(e,t=document)=>t.querySelector(e),$$=(e,t=document)=>t.querySelectorAll(e);Node.prototype.on=function(e,t){return this.addEventListener(e,t)};var actions={},set={},unset={},triggers={},state={database:null,table:null,databases_order:[],databases:{},tables:[]},nav={};function tabClassActive(){return["bg-navy-100","text-navy-900","border-navy-300"]}function tabClassInactive(){return["hover:bg-gray-100","bg-gray-50","bg-gradient-to-b","from-white","to-gray-100","border-gray-300"]}function hollowClassActive(){return["bg-navy-100","text-navy-900","border","border-navy-300","rounded"]}function hollowClassInactive(){return["hover:bg-grayExtra","border","border-transparent"]}function eventCellKeydown(){window.addEventListener("keydown",e=>{let t=$('cell-ring[state="active"]');if(t)switch(e.key){case"ArrowLeft":case"ArrowRight":case"ArrowDown":case"ArrowUp":t.handleStep(e.key);break;case"Tab":t.handleCellTab(e);break;case"Enter":t.handleCellEdit()}})}function handleCellClose(){isCellState("edit")&&(dom.current.cell_ring.setAttribute("state","active"),resetEdit())}class cell{static setPreview(e,t){$("preview-value",t.closest("table-cell")).innerHTML=e}static setTempValue(e,t){const s=table.get(t);temp[row.getType(t)][s].data[row.getIndex(t)][cell.getColumn(t)]=e}static getTempValue(e){const t=table.get(e);return temp[row.getType(e)][t].data[row.getIndex(e)][cell.getColumn(e)]}static getColumn(e){return e.closest("table-cell").getAttribute("column")}static isNullable(){return"true"==obj.closest("table-cell").getAttribute("nullable")}static isNull(){return"true"==obj.closest("table-cell").getAttribute("is_null")}}function leaveEdit(){in_field=!0,fieldClose()}function fieldClose(){const e=$('cell-ring[state="edit"]');if(!e)return;const t=e.closest("table-cell"),s=$("cell-edit",t);e.setAttribute("state","active"),s.removeAttribute("active")}function updatePreview(e,t){$("preview-value",t.closest("table-cell")).innerHTML=e}function updateNull(e){const t=$("preview",e.closest("table-cell"));$("preview-value",e.closest("table-cell")).setAttribute("hidden",""),t.setAttribute("active","true");$("preview-null",e.closest("table-cell")).removeAttribute("hidden")}function setCellFieldState(e,t){t.querySelector("cell-edit").setAttribute("active",e)}function setCellPreviewState(e,t){t.querySelector("cell-preview").setAttribute("active",e)}function cellActiveIndex(e){return[...e.parentElement.children].indexOf(e)+1}function isCellActive(){return dom.current&&"active"==dom.current.cell_ring.getAttribute("state")}function isCellState(e="active"){return dom.current&&dom.current.cell_ring.getAttribute("state")==e}function setCellActiveToEl(e,t="active"){e.setAttribute("state",t)}function isEmpty(e){return 0===Object.keys(e).length}function error(e){}function success(e){}function spreadDomCell(e){return current={table_cell:e,cell_ring:e.querySelector("cell-ring"),cell_edit:e.querySelector("cell-edit"),cell_preview:e.querySelector("cell-preview")}}function resetStore(){dom.current=null,dom.left=null,dom.right=null,dom.up=null,dom.down=null}function storeDomCell(e){dom.current=spreadDomCell(e),dom.left=spreadDomCell(getDomCellLeft()),dom.right=spreadDomCell(getDomCellRight()),dom.down=spreadDomCell(getDomCellDown()),dom.up=spreadDomCell(getDomCellUp())}nav.db={},nav.tb={},nav.tb.section=e=>$("nav-tb-section",nav.db.group(e)),nav.db.item=e=>$(`nav-db[db="${e}"]`),nav.db.group=e=>$(`nav-db[db="${e}"]`).closest("nav-db-group"),nav.tb.item=()=>{const e=$(`nav-db[db="${state.database}"]`);return $(`nav-tb[tb="${state.table}"]`,e.closest("nav-db-group"))},nav.tb.group=e=>$("nav-tb-group",nav.db.group(e)),nav.arrow=e=>$(`nav-db[db="${e}"] [arrow]`);class row{static isNew(e){return!!e.closest(".row-new")}static getType(e){return row.isNew(e)?"insert":"update"}static getIndex(e){return e.closest("table-row").dataset.index}}class tab{static onMiddleClick(e){e.on("mouseup",t=>{1===t.button&&tab.closeHandler(e)})}}class table{static get(e){let t=e;return"PANE-MAIN"!=e.tagName&&(t=e.closest("pane-main")),`${t.getAttribute("database")} ${t.getAttribute("table")}`}}actions.database={},actions.databases={},actions.databases.load=()=>{axios.get("server/php/queries/databases.php").then(e=>{200===e.status&&(set.database.order(e.data),set.database.items(e.data))})},actions.database.toggle=e=>{set.database.toggleState(e)},actions.table={},actions.tables={},actions.table.load=(e,t)=>{isEmpty(state.databases[e].table_items[t])?axios.get(`server/php/queries/data.php?database=${e}&table=${t}`).then(s=>{200===s.status&&(set.table.item(s.data,e,t),actions.table.activate(e,t))}):actions.table.activate(e,t)},actions.tables.load=e=>{axios.get("server/php/queries/tables.php?database="+e).then(t=>{200===t.status&&(set.table.order(t.data,e),set.table.items(t.data,e))})},actions.table.activate=(e,t)=>{set.table.name(e,t)},actions.table.close=(e,t)=>{set.table.item({},e,t),set.table.name(null,null)},set.database={},set.database.order=e=>{state.databases_order=e},set.database.items=e=>{state.databases={},e.forEach(e=>{state.databases[e]={open:!1,table_order:[],table_items:{}}}),triggers.database.load()},set.database.toggleState=e=>{state.databases[e].open=!state.databases[e].open,triggers.db.toggle(e)},set.table={},set.table.order=(e,t)=>{state.databases[t].table_order=e},set.table.name=(e,t)=>{state.database=e,state.table=t,table&&triggers.table.activate()},set.table.item=(e,t,s)=>{state.databases[t].table_items[s]=e},set.table.items=(e,t)=>{e.forEach(e=>{state.databases[t].table_items[e]={}}),triggers.table.items(t)},triggers.database={},triggers.db={},triggers.database.load=()=>{$("nav-db-groups").databasesPopulate()},triggers.db.toggle=e=>{triggers.db.open(e),triggers.db.close(e)},triggers.db.open=e=>{state.databases[e].open&&(nav.arrow(e).classList.add("rotate-180"),nav.tb.section(e).removeAttribute("hidden"),""==nav.tb.group(e).innerHTML&&actions.tables.load(e))},triggers.db.close=e=>{state.databases[e].open||(nav.arrow(e).classList.remove("rotate-180"),nav.tb.section(e).setAttribute("hidden",""))},triggers.table={},triggers.table.activate=()=>{$$("nav-tb").forEach(e=>{e.removeAttribute("active")}),nav.tb.item().activate(),$("tab-items").activate()},triggers.table.close=(e,t)=>{$("nav-db-groups").tablesDeactivate(),$("tab-items").close(e,t)},triggers.table.items=e=>{const t=$(`nav-db[db="${e}"]`).parentElement;$("nav-db-groups").tablesPopulate(e),$("nav-tb-section",t).removeAttribute("hidden"),$("nav-loading",t).setAttribute("hidden","")},unset.table={};class ActionbarRefresh extends HTMLElement{constructor(){super()}static get observedAttributes(){}connectedCallback(){this.innerHTML='\n      <div data-action>\n        <img-svg src="material-icons/refresh.svg" classes="animate-spin w-5 h-5"></img-svg>\n        <div>Refresh</div>\n      </div>\n    '}attributeChangedCallback(e,t,s){"active"==e&&t!==s&&("true"==s?this.classList.remove("hidden"):this.classList.add("hidden"))}}customElements.define("actionbar-refresh",ActionbarRefresh);class ButtonItem extends HTMLElement{constructor(){super()}connectedCallback(){const e=this.getAttribute("href"),t=this.getAttribute("title");this.removeAttribute("title");let s="";s=e?this.linkHtml(t,e):this.buttonHtml(t,e),this.innerHTML=s}getClasses(){let e="";switch(this.getAttribute("style")){case"default":e=this.classesStyleDefault();break;case"action":e=this.classesStyleAction();break;case"ghost":e=this.classesStyleGhost()}return this.classesBase().concat(e)}linkHtml(e,t){return`<a href="${t}" class="${this.getClasses().join(" ")}">${e}</a>`}buttonHtml(e){return`<button class="focus:outline-none cursor-default ${this.getClasses().join(" ")}">${e}</button>`}classesBase(){return["inline-flex","items-center","gap-2","px-4","py-1.5","font-bold","rounded","fill-current"]}classesStyleDefault(){return["text-white","border-2","bg-blueGray-700","border-black","hover:bg-blueGray-800"]}classesStyleAction(){return["text-white","bg-gradient-to-br","from-navy-500","via-navy-600","to-navy-600","hover:from-navy-600","border","border-navy-600"]}classesStyleGhost(){return["border-2","border-gray-200","hover:border-gray-400"]}}customElements.define("button-item",ButtonItem);class CheckboxItem extends HTMLElement{constructor(){super()}connectedCallback(){const e=this.getAttribute("name"),t=this.getAttribute("label"),s="true"==this.getAttribute("checked")?" checked":"";this.innerHTML=`\n      <label class="flex select-none items-center gap-2">\n        <input type="checkbox" class="form-checkbox w-4 h-4 rounded focus:outline-none focus:ring-0 focus:ring-offset-0 text-navy-600" name="${e}" ${s} />\n        ${t||""}\n      </label>\n    `}}customElements.define("checkbox-item",CheckboxItem);class ImgSvg extends HTMLElement{constructor(){super()}static get observedAttributes(){return["classes","src"]}attributeChangedCallback(e,t,s){t!==s&&"src"==e&&""!=s&&fetch("assets/icons/"+s).then(e=>e.text()).then(e=>{this.innerHTML=e;const t=this.querySelector("svg");t.setAttribute("class",this.getAttribute("classes")),t.classList.add("fill-current")}).catch(console.error.bind(console))}}customElements.define("img-svg",ImgSvg);class MessageItem extends HTMLElement{constructor(){super()}connectedCallback(){const e=this.getAttribute("state"),t=this.innerHTML;let s="";switch(e){case"success":s="bg-green-600";break;case"error":s="bg-red-700"}this.classList.add("flex",s,"text-white","text-opacity-90"),this.innerHTML=`\n      <div class="flex-1 p-6">${t}</div>\n      <div class="p-2">\n        <button class="hover:bg-black hover:bg-opacity-10 p-2 focus:outline-none cursor-default">\n          <img-svg src="remixicon/close.svg"></img-svg>\n        </button>\n      </div>\n    `}}customElements.define("message-item",MessageItem);class ModalBox extends HTMLElement{constructor(){super()}connectedCallback(){this.deactivate(),this.innerHTML='\n      <div\n        data-backdrop\n        class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"\n      >\n        <div class="flex items-start w-full max-w-lg bg-white shadow-md">\n          <div class="p-8 flex-1" data-modal-content>\n            <modal-info></modal-info>\n          </div>\n          <button class="p-2 m-2 focus:outline-none hover:bg-gray-100 rounded">\n            <img-svg src="remixicon/close.svg"></img-svg>\n          </button>\n        </div>\n      </div>\n    ',this.onClose()}onClose(){this.querySelector("button").addEventListener("click",e=>{this.deactivate()}),this.querySelector("[data-backdrop]").addEventListener("click",e=>{e.target==e.currentTarget&&this.deactivate()})}activate(){this.removeAttribute("hidden")}deactivate(){this.setAttribute("hidden","")}}customElements.define("modal-box",ModalBox);class PaneMain extends HTMLElement{constructor(){super()}static get observedAttributes(){return["active"]}connectedCallback(){this.classList.add("flex","flex-col","overflow-auto","flex-1");const e=this.gridCols(),t=`auto ${e.widths.join("px ")}px`;console.log(JSON.stringify(t)),this.innerHTML=`\n      <actions-x></actions-x>\n      <div class="flex-1 flex overflow-auto">\n        <div class="overflow-x-auto flex-1 my-4 border border-gray-200 rounded bg-white">\n          <div class="flex-1 text-13" style="width: ${e.sum}px;">\n            <div data-table class="grid gap-y-px bg-white" style="grid-template-columns: ${t};">\n              <table-headings></table-headings>\n              <table-cells></table-cells>\n            </div>\n          </div>\n        </div>\n      </div>\n      <pagination-x></pagination-x>\n    `}gridCols(){const e=data[table.get(this)];let t=0,s=[];return e.cols_order.forEach(a=>{let i=null;const n=e.cols[a];i=n.config&&n.config.hasOwnProperty("width")?n.config.width:300,s.push(i),t+=i,console.log(i)}),{sum:t,widths:s}}part(){return'\n      <div class="contents">\n        <row-select></row-select>\n        <table-cell></table-cell>\n        <table-cell></table-cell>\n        <table-cell></table-cell>\n      </div>'}attributeChangedCallback(e,t,s){t!==s&&"active"==e&&("true"==s?this.thisActivate():this.thisDeactivate())}thisActivate(){this.removeAttribute("hidden")}thisDeactivate(){this.setAttribute("hidden","")}activate(){this.setAttribute("active","true")}deactivate(){this.removeAttribute("active")}}customElements.define("pane-main",PaneMain);class RadioItem extends HTMLElement{constructor(){super()}connectedCallback(){const e=this.getAttribute("name"),t=this.getAttribute("label"),s="true"==this.getAttribute("checked")?" checked":"";this.innerHTML=`\n      <label class="flex select-none items-center gap-2">\n        <input type="radio" class="w-4 h-4 focus:outline-none focus:ring-0 focus:ring-offset-0 text-navy-600" name="${e}" ${s} />\n        ${t}\n      </label>\n    `}}customElements.define("radio-item",RadioItem);class ColumnsItem extends HTMLElement{constructor(){super()}static get observedAttributes(){return["checked"]}connectedCallback(){const e=this.getAttribute("name"),t=this.getAttribute("checked");this.classList.add("flex"),this.innerHTML=this.template(e,t),this.onClick()}template(e,t){return`\n      <label class="btn btn-borderless">\n        <input type="checkbox" name="${e}" class="checkbox form-checkbox" ${t?"checked":""}>\n        ${e}\n      </label>\n    `}attributeChangedCallback(e,t,s){t!==s&&"checked"==e&&this.onChange()}onClick(){$("input",this).addEventListener("change",e=>{e.currentTarget.checked?this.activate():this.deactivate()})}onChange(){console.log("Something has changed")}activate(){this.setAttribute("checked","true")}deactivate(){this.removeAttribute("checked")}}customElements.define("columns-item",ColumnsItem);class ColumnsX extends HTMLElement{constructor(){super()}static get observedAttributes(){return["active"]}connectedCallback(){this.classList.add("gap-2","flex","flex-col","text-sm","p-4"),this.setAttribute("hidden",""),this.innerHTML=this.template("Columns")}checkboxes(){const e=this.closest("pane-main").getAttribute("database"),t=this.closest("pane-main").getAttribute("table"),s=data[`${e} ${t}`].cols_all,a=data[`${e} ${t}`].cols_order;let i="";return s.forEach(e=>{const t=a.includes(e);i+=`<columns-item name="${e}" ${t?'checked="true"':""}></columns-item>`}),i}template(e){return`\n      <div class="font-bold">${e}</div>\n      <div class="flex gap-x-4 gap-y-1 flex-wrap">\n        ${this.checkboxes()}\n      </div>\n    `}attributeChangedCallback(e,t,s){t!==s&&"active"==e&&("true"==s?this.thisActivate():this.thisDeactivate())}thisActivate(){this.classList.remove("hidden")}thisDeactivate(){this.classList.add("hidden")}activate(){this.setAttribute("active","true")}deactivate(){this.removeAttribute("active")}}customElements.define("columns-x",ColumnsX);class ActionsAdd extends HTMLElement{constructor(){super()}static get observedAttributes(){return["active"]}connectedCallback(){this.classList.add("btn","btn-default"),this.innerHTML='\n      <img-svg src="remixicon/add-circle-line.svg" classes="w-5 h-5"></img-svg>\n      <div>Add</div>\n    ',this.onClick()}attributeChangedCallback(e,t,s){}onClick(){this.addEventListener("click",()=>{console.log(current.database);const e=$('cell-ring[state="active"]',this.closest("pane-main"));console.log("dooo2"),e&&(console.log("dooo"),e.closest("table-row").addRow())})}}customElements.define("actions-add",ActionsAdd);class ActionsBtn extends HTMLElement{constructor(){super()}static get observedAttributes(){return["active"]}connectedCallback(){const e=this.getAttribute("label"),t=this.getAttribute("icon");this.classList.add("btn"),this.classList.add("btn-default"),this.innerHTML=`\n      <img-svg src="${t}" classes="w-5 h-5"></img-svg>\n      <div>${e}</div>\n    `}attributeChangedCallback(e,t,s){t!==s&&"active"==e&&("true"==s?this.thisActivate():this.thisDeactivate())}thisActivate(){this.classList.replace("btn-default","btn-default-active")}thisDeactivate(){this.classList.replace("btn-default-active","btn-default")}activate(){this.setAttribute("active","true")}deactivate(){this.removeAttribute("active")}}customElements.define("actions-btn",ActionsBtn);class ActionsPanes extends HTMLElement{constructor(){super()}static get observedAttributes(){return["active"]}connectedCallback(){this.classList.add("block","bg-white","border","rounded","border-gray-200"),this.setAttribute("hidden",""),this.innerHTML="\n      <panes-x></panes-x>\n      <columns-x></columns-x>\n      <filter-x></filter-x>\n      <order-x></order-x>\n    "}attributeChangedCallback(e,t,s){t!==s&&"active"==e&&("true"==s?this.thisActivate():this.thisDeactivate())}thisActivate(){this.removeAttribute("hidden")}thisDeactivate(){this.setAttribute("hidden","")}activate(e){this.setAttribute("active","true"),this.querySelector(e).removeAttribute("hidden")}deactivate(){[...this.children].forEach(e=>{e.setAttribute("hidden","")}),this.removeAttribute("active")}}customElements.define("actions-panes",ActionsPanes);class ActionsTab extends HTMLElement{constructor(){super()}static get observedAttributes(){return["active"]}connectedCallback(){const e=this.getAttribute("label"),t=this.getAttribute("icon");this.classList.add("btn","btn-default"),this.innerHTML=`\n      <img-svg src="${t}" classes="w-5 h-5"></img-svg>\n      <div>${e}</div>\n      <img-svg src="remixicon/arrow-down-s.svg" classes="w-5 h-5 fill-current opacity-30"></img-svg>\n    `,this.onClick()}onClick(){this.addEventListener("click",()=>{const e="true"==this.getAttribute("active"),t=this.getAttribute("name"),s=this.closest("pane-main").querySelector("actions-panes");console.log(s),this.closest("pane-main").querySelector("actions-tabs").deactivate(),s.deactivate(),e||(this.activate(),s.activate(t))})}attributeChangedCallback(e,t,s){t!==s&&"active"==e&&("true"==s?this.thisActivate():this.thisDeactivate())}thisActivate(){this.classList.replace("btn-default","btn-default-active")}thisDeactivate(){this.classList.replace("btn-default-active","btn-default")}activate(){this.setAttribute("active","true")}deactivate(){this.removeAttribute("active")}}customElements.define("actions-tab",ActionsTab);class ActionsTabs extends HTMLElement{constructor(){super()}connectedCallback(){this.classList.add("flex","gap-4","pt-4","bg-gray-50","justify-between","gap-1"),this.innerHTML='\n      <div class="flex gap-1">\n        <actions-tab name="panes-x" label="Panes" icon="remixicon/layout-5-line.svg"></actions-tab>\n        <actions-tab name="columns-x" label="Columns" icon="remixicon/layout-column-line.svg"></actions-tab>\n        <actions-tab name="filter-x" label="Filter" icon="remixicon/filter-3-line.svg"></actions-tab>\n        <actions-tab name="order-x" label="Order" icon="remixicon/arrow-up-down.svg"></actions-tab>\n      </div>\n      <div class="flex gap-1">\n        <actions-btn name="refresh" label="Refresh" icon="material-icons/refresh.svg"></actions-btn>\n        <actions-add></actions-add>\n        <execute-x></execute-x>\n        <revert-x></revert-x>\n      </div>\n    '}deactivate(){$$("actions-tab",this).forEach(e=>{e.deactivate()})}}customElements.define("actions-tabs",ActionsTabs);class ActionsX extends HTMLElement{constructor(){super()}connectedCallback(){this.classList.add("flex","flex-col","gap-4"),this.innerHTML="      \n      <actions-tabs></actions-tabs>\n      <actions-panes></actions-panes>\n      "}}customElements.define("actions-x",ActionsX);class PaneClose extends HTMLElement{constructor(){super()}connectedCallback(){this.innerHTML='\n      <div class="p-2">\n        <button class="focus:outline-none hover:bg-gray-100 p-2 rounded">\n          <img-svg src="remixicon/close.svg"></img-svg>\n        </button>\n      </div>',this.onClick()}onClick(){$("button",this).addEventListener("click",()=>{$("actions-panes > *:not([hidden])",this).setAttribute("hidden",""),$("actions-panes",this).removeAttribute("active"),$('actions-tab[active="true"]',this).deactivate()})}}customElements.define("pane-close",PaneClose);class FilterItem extends HTMLElement{constructor(){super()}connectedCallback(){this.classList.add("contents"),this.innerHTML=`\n      <select class="form-select actionbar-select">\n        <option>hello</option>\n        <option>hello2</option>\n      </select>\n      <select class="form-select actionbar-select">\n        ${this.matchesOptions()}\n      </select>\n      <input type="text" class="form-input actionbar-select" />\n      <filter-delete class="btn btn-default">\n        <img-svg src="remixicon/delete-bin-line.svg" classes="w-5 h-5"></img-svg>\n      </filter-delete>\n    `,this.onRemove()}onRemove(){this.querySelector("filter-delete").addEventListener("click",e=>{e.currentTarget.closest("filter-item").remove()})}matchesOptions(){let e=[];return[{name:"contains",label:"Contains"},{name:"not_contains",label:"Not contains"},{name:"starts_with",label:"Starts with"},{name:"ends_with",label:"Ends with"},{name:"equals",label:"Equals"},{name:"not_equals",label:"Not equals"},{name:"less_than",label:"Less than"},{name:"larger_than",label:"Larger than"}].forEach(t=>{e.push(`<option value="${t.name}">${t.label}</option>`)}),e.join(" ")}}customElements.define("filter-item",FilterItem);class FilterX extends HTMLElement{constructor(){super()}static get observedAttributes(){return["active"]}connectedCallback(){this.classList.add("gap-4","flex","flex-col","p-4","text-sm"),this.setAttribute("hidden",""),this.innerHTML=this.template("Filter"),this.onAdd()}template(e){return`      \n      <div class="grid grid-cols-[minmax(200px,max-content),minmax(200px,max-content),1fr,auto] gap-2 flex-col">\n        <div class="contents">\n          ${this.heading("Column")}\n          ${this.heading("Match")}\n          ${this.heading("Value")}\n          ${this.heading("")}\n        </div>\n        <filter-items class="contents"></filter-items>\n      </div>\n      <div class="flex gap-2 justify-between">\n        <filter-add class="btn btn-default">\n          <img-svg src="remixicon/add.svg" classes="w-5 h-5"></img-svg>\n          <div>Add new</div>\n        </filter-add>\n        <button class="btn btn-primary">\n          <img-svg src="remixicon/filter-3-line.svg" classes="w-5 h-5"></img-svg>\n          <div>Filter rows</div>\n        </button>\n      </div>\n    `}onAdd(){$("filter-add").addEventListener("click",()=>{this.appendItem()})}appendItem(){$("filter-items").insertAdjacentHTML("beforeend","<filter-item></filter-item>")}heading(e){return`<div class="font-bold text-sm">${e}</div>`}attributeChangedCallback(e,t,s){t!==s&&"active"==e&&("true"==s?this.thisActivate():this.thisDeactivate())}thisActivate(){this.removeAttribute("hidden")}thisDeactivate(){this.setAttribute("hidden","")}activate(){this.setAttribute("active","true")}deactivate(){this.removeAttribute("active")}}customElements.define("filter-x",FilterX);class OrderItem extends HTMLElement{constructor(){super()}connectedCallback(){this.classList.add("contents"),this.innerHTML=`\n      <select class="form-select actionbar-select">\n        <option>hello</option>\n        <option>hello2</option>\n      </select>\n      <select class="form-select actionbar-select">\n        ${this.matchesOptions()}\n      </select>\n      <order-delete class="btn btn-default">\n        <img-svg src="remixicon/delete-bin-line.svg" classes="w-5 h-5"></img-svg>\n      </order-delete>\n    `,this.onRemove()}onRemove(){this.querySelector("order-delete").addEventListener("click",e=>{e.currentTarget.closest("order-item").remove()})}matchesOptions(){let e=[];return[{name:"ASC",label:"Ascending"},{name:"DESC",label:"Descending"}].forEach(t=>{e.push(`<option value="${t.name}">${t.label}</option>`)}),e.join(" ")}}customElements.define("order-item",OrderItem);class OrderX extends HTMLElement{constructor(){super()}static get observedAttributes(){return["active"]}connectedCallback(){this.classList.add("gap-4","flex","flex-col","p-4","text-sm"),this.setAttribute("hidden",""),this.innerHTML=this.template(),this.onAdd()}template(){return`\n      <div class="grid grid-cols-[minmax(200px,max-content),1fr,auto] gap-2 flex-col">\n        <div class="contents">\n          ${this.heading("Order by")}\n          ${this.heading("Order")}\n          ${this.heading("")}\n        </div>\n        <order-items class="contents"></order-items>\n      </div>\n      <div class="flex gap-2 justify-between">\n        <order-add class="btn btn-default">\n          <img-svg src="remixicon/add.svg" classes="w-5 h-5"></img-svg>\n          <div>Add new</div>\n        </order-add>\n        <button class="btn btn-primary">\n          <img-svg src="remixicon/arrow-up-down.svg" classes="w-5 h-5"></img-svg>\n          <div>Order rows</div>\n        </button>\n      </div>\n    `}onAdd(){$("order-add").addEventListener("click",()=>{this.appendItem()})}appendItem(){$("order-items").insertAdjacentHTML("beforeend","<order-item></order-item>")}heading(e){return`<div class="font-bold text-sm">${e}</div>`}attributeChangedCallback(e,t,s){t!==s&&"active"==e&&("true"==s?this.thisActivate():this.thisDeactivate())}thisActivate(){this.removeAttribute("hidden")}thisDeactivate(){this.setAttribute("hidden","")}activate(){this.setAttribute("active","true")}deactivate(){this.removeAttribute("active")}}customElements.define("order-x",OrderX);class PanesItem extends HTMLElement{constructor(){super()}static get observedAttributes(){return["checked"]}connectedCallback(){const e=this.getAttribute("name"),t=this.getAttribute("label"),s=this.getAttribute("checked");this.classList.add("flex"),this.innerHTML=this.template(e,t,s),this.onClick()}template(e,t,s){return`\n      <label class="btn btn-borderless">\n        <input type="checkbox" name="${e}" class="checkbox form-checkbox" ${s?"checked":""}>\n        ${t}\n      </label>\n    `}attributeChangedCallback(e,t,s){t!==s&&"checked"==e&&this.onChange(s)}onClick(){this.querySelector("input").addEventListener("change",e=>{e.currentTarget.checked?this.activate():this.deactivate()})}onChange(e){const t=this.getAttribute("name");$$(t).forEach(s=>{e?s.removeAttribute("hidden",""):s.setAttribute("hidden",""),$$(`panes-item[name="${t}"]`).forEach(t=>{e?t.setAttribute("checked","true"):t.removeAttribute("checked"),t.querySelector("input").checked=e})})}activate(){this.setAttribute("checked","true")}deactivate(){this.removeAttribute("checked")}}customElements.define("panes-item",PanesItem);class PanesX extends HTMLElement{constructor(){super()}static get observedAttributes(){return["active"]}connectedCallback(){this.classList.add("gap-2","flex","flex-col","p-4","text-sm"),this.setAttribute("hidden",""),this.innerHTML=this.template()}checkboxes(){return'\n      <panes-item name="topbar-wrap" label="Top" checked="true"></panes-item>\n      <panes-item name="sidebar-wrap" label="Sidebar" checked="true"></panes-item>\n      <panes-item name="pagination-x" label="Footer" checked="true"></panes-item>\n    '}template(){return`\n      <div class="font-bold">Panes</div>\n      <div class="flex gap-4">\n        ${this.checkboxes()}\n      </div>\n    `}attributeChangedCallback(e,t,s){t!==s&&"active"==e&&("true"==s?this.thisActivate():this.thisDeactivate())}thisActivate(){this.classList.remove("hidden")}thisDeactivate(){this.classList.add("hidden")}activate(){this.setAttribute("active","true")}deactivate(){this.removeAttribute("active")}}customElements.define("panes-x",PanesX);class DeleteX extends HTMLElement{constructor(){super()}static get observedAttributes(){return["active"]}connectedCallback(){this.classList.add("btn","btn-default"),this.innerHTML='\n      <img-svg src="remixicon/delete-bin-line.svg" classes="w-5 h-5"></img-svg>\n      Delete checked\n    ',this.onClick()}onClick(){this.addEventListener("click",()=>{$$(".row-new[active]").forEach(e=>{e.remove()}),this.delete()})}async delete(){const e=[1,2,3];try{return(await axios.post("http://localhost/tools/squares/server/php/queries/delete.php?database=asda&table=asda",{ids:e})).data}catch(e){console.error(e)}}}customElements.define("delete-x",DeleteX);class ExecuteX extends HTMLElement{constructor(){super()}static get observedAttributes(){return["active"]}connectedCallback(){this.classList.add("btn","btn-primary"),this.innerHTML='\n      <img-svg src="remixicon/flashlight-fill.svg" classes="w-5 h-5"></img-svg>\n      Execute\n    '}onClick(){this.addEventListener("click",()=>{this.run()})}async run(){const e=[1,2,3];try{return(await axios.post("http://localhost/tools/squares/server/php/queries/delete.php?database=asda&table=asda",{ids:e})).data}catch(e){console.error(e)}}}customElements.define("execute-x",ExecuteX);class PaginationX extends HTMLElement{constructor(){super()}connectedCallback(){this.innerHTML=`\n    <div class="flex justify-between pb-4 bg-gray-50">\n      <row-actions></row-actions>\n      <div class="flex gap-4">\n        ${this.buttonTemplate("prev","remixicon/arrow-left-s-line.svg")}\n        <records-x offset="101" rows="100" total="120234233"></records-x>\n        ${this.buttonTemplate("next","remixicon/arrow-right-s-line.svg")}\n      </div>\n    </div>\n    `}buttonTemplate(e,t){return`\n      <records-${e} class="py-1.5 px-2 select-none flex gap-1 items-center hover:bg-grayExtra rounded">\n        <img-svg src="${t}" classes="w-5 h-5">\n      </records-${e}>`}}customElements.define("pagination-x",PaginationX);class RecordsX extends HTMLElement{constructor(){super()}static get observedAttributes(){return["limit","rows","total"]}connectedCallback(){this.classList.add("text-13","items-center","flex"),this.update()}attributeChangedCallback(e,t,s){t!==s&&this.update()}update(){const e=this.getAttribute("offset"),t=this.getAttribute("rows"),s=this.getAttribute("total");this.innerHTML=this.template(e,t,s)}template(e,t,s){return`${e}-${parseInt(e)+parseInt(t)} of ${parseInt(s).toLocaleString("en-US")}`}}customElements.define("records-x",RecordsX);class RevertX extends HTMLElement{constructor(){super()}static get observedAttributes(){return["active"]}connectedCallback(){this.classList.add("btn","btn-danger"),this.innerHTML='\n      <img-svg src="material-icons/undo_black_24dp.svg" classes="w-5 h-5"></img-svg>\n      Revert\n    '}onClick(){this.addEventListener("click",()=>{this.run()})}async run(){const e=[1,2,3];try{return(await axios.post("http://localhost/tools/squares/server/php/queries/delete.php?database=asda&table=asda",{ids:e})).data}catch(e){console.error(e)}}}customElements.define("revert-x",RevertX);class RowActions extends HTMLElement{constructor(){super()}static get observedAttributes(){return["active"]}connectedCallback(){this.classList.add("invisible","flex","gap-1"),this.innerHTML='\n      <delete-x></delete-x>\n      <duplicate-x class="btn btn-default">\n        <img-svg src="remixicon/file-copy-2-line.svg" classes="w-5 h-5"></img-svg>\n        Duplicate checked\n      </duplicate-x>\n    '}attributeChangedCallback(e,t,s){t!==s&&"active"==e&&("true"==s?this.thisActivate():this.thisDeactivate())}toggle(){$("row-select input:checked",this.closest("pane-main"))?this.activate():this.deactivate()}thisActivate(){this.classList.remove("invisible")}thisDeactivate(){this.classList.add("invisible")}activate(){this.setAttribute("active","true")}deactivate(){this.removeAttribute("active")}}customElements.define("row-actions",RowActions);class NavDbGroups extends HTMLElement{constructor(){super()}connectedCallback(){this.classList.add("flex","flex-col"),actions.databases.load()}databasesPopulate(){let e="";state.databases_order.forEach(t=>{e+=`\n      <nav-db-group>\n        <nav-db db="${t}" class="nav-row">\n          <img-svg\n            src="remixicon/database-2-fill.svg"\n            classes="w-4 h-4 text-yellow-500">\n          </img-svg>\n          <div class="flex-1 truncate font-bold text-sm">\n            ${t}\n          </div>\n          <img-svg\n            arrow\n            src="remixicon/arrow-down-s.svg"\n            classes="w-4 h-4 text-gray-800">\n          </img-svg>\n        </nav-db>\n        <nav-tb-section hidden>\n          <nav-refresh class="nav-row">\n            <img-svg\n              src="material-icons/refresh.svg"\n              classes="w-4 h-4 text-gray-400">\n            </img-svg>\n            <div class="flex-1 truncate text-13">Refresh</div>\n          </nav-refresh>\n          <nav-loading class="nav-row">\n            <img-svg\n              src="material-icons/refresh.svg"\n              classes="w-4 h-4 text-gray-400 animate-spin">\n            </img-svg>\n            <div class="flex-1 truncate text-13">Loading...</div>\n          </nav-loading>\n          <nav-tb-group></nav-tb-group>\n        </nav-tb-section>\n      </nav-db-group>`}),this.innerHTML+=e,this.onClickRefresh(),this.onClickDatabase()}tablesPopulate(e){let t="";state.databases[e].table_order.forEach(e=>{t+=`\n        <nav-tb tb="${e}" title="${e}" class="nav-row">\n          <img-svg src="boxicons/bx-table.svg" classes="w-4 h-4 text-navy-400"></img-svg>\n          <div class="flex-1 truncate text-13">${e}</div>\n        </nav-tb>\n      `}),nav.tb.group(e).innerHTML=t,this.onClickTable(e)}onClickRefresh(){$$("nav-refresh").forEach(e=>{e.on("click",e=>{const t=e.currentTarget.closest("nav-db-group"),s=$("nav-db",t).getAttribute("db");actions.tables.load(s)})})}onClickDatabase(){$$("nav-db").forEach(e=>{e.on("click",e=>{actions.database.toggle(e.currentTarget.getAttribute("db"))})})}onClickTable(e){$("nav-tb",nav.tb.group(e)).forEach(e=>{e.on("click",e=>{const t=e.currentTarget.getAttribute("tb"),s=$("nav-db",this.closest("nav-db-group")).getAttribute("db");actions.table.load(s,t)})})}}customElements.define("nav-db-groups",NavDbGroups);class SidebarFilter extends HTMLElement{constructor(){super()}connectedCallback(){this.innerHTML='\n      <label class="flex flex-col gap-2">\n        <div class="uppercase font-bold text-sm">Filter tables</div>\n        <input spellcheck="false" placeholder="Show matching tables..." type="text" class="form-input bg-white border-gray-200 text-sm rounded focus:ring-0 focus:border-gray-400">\n      </label>\n    ',this.onChange()}onChange(){this.querySelector("input").addEventListener("input",()=>{this.filter()})}filter(){const e=$("sidebar-filter input").value;$$("sidebar-table").forEach(t=>{t.getValue().includes(e)?t.show():t.hide()})}}customElements.define("sidebar-filter",SidebarFilter);class SidebarX extends HTMLElement{constructor(){super()}connectedCallback(){this.classList.add("flex","flex-col","pb-4","overflow-auto","resize-x","bg-gray-50","w-80","gap-4","pl-4"),this.innerHTML='\n      <h2 class="pt-4 text-sm text-gray-400 uppercase">Databases and tables</h2>\n      <sidebar-filter></sidebar-filter>\n      <nav-db-groups></nav-db-groups>\n    '}}customElements.define("sidebar-x",SidebarX);class IconDatabase2 extends HTMLElement{constructor(){super()}static get observedAttributes(){return["classes"]}connectedCallback(){this.innerHTML='\n        <svg\n          xmlns="http://www.w3.org/2000/svg"\n          viewBox="0 0 24 24"\n          width="24"\n          height="24"\n        >\n          <path fill="none" d="M0 0h24v24H0z" />\n          <path\n            d="M5 12.5c0 .313.461.858 1.53 1.393C7.914 14.585 9.877 15 12 15c2.123 0 4.086-.415 5.47-1.107 1.069-.535 1.53-1.08 1.53-1.393v-2.171C17.35 11.349 14.827 12 12 12s-5.35-.652-7-1.671V12.5zm14 2.829C17.35 16.349 14.827 17 12 17s-5.35-.652-7-1.671V17.5c0 .313.461.858 1.53 1.393C7.914 19.585 9.877 20 12 20c2.123 0 4.086-.415 5.47-1.107 1.069-.535 1.53-1.08 1.53-1.393v-2.171zM3 17.5v-10C3 5.015 7.03 3 12 3s9 2.015 9 4.5v10c0 2.485-4.03 4.5-9 4.5s-9-2.015-9-4.5zm9-7.5c2.123 0 4.086-.415 5.47-1.107C18.539 8.358 19 7.813 19 7.5c0-.313-.461-.858-1.53-1.393C16.086 5.415 14.123 5 12 5c-2.123 0-4.086.415-5.47 1.107C5.461 6.642 5 7.187 5 7.5c0 .313.461.858 1.53 1.393C7.914 9.585 9.877 10 12 10z"\n          />\n        </svg>\n      ',this.querySelector("svg").setAttribute("class",this.classes)}attributeChangedCallback(e,t,s){t!==s&&(this.classes=s)}}customElements.define("icon-database-2",IconDatabase2);class ModalInfo extends HTMLElement{constructor(){super()}connectedCallback(){this.innerHTML='\n      <div class="flex flex-col flex-1 gap-6">\n        <div class="flex gap-3 items-center">\n          <img-svg src="remixicon/checkbox-multiple-blank.svg" classes="h-12 w-12"></img-svg>\n          <img-svg\n            src="logo.svg"\n            classes="h-10"\n          ></img-svg>\n        </div>\n        we rjiweor jweior jweior jwer iowejrio wejrweiojr weiorj weiorj\n        weiorj iowerj weiorj weiorjwe\n\n        \x3c!-- Links --\x3e\n        <div class="flex flex-col gap-2">\n          <h2 class="text-xl font-bold">Links</h2>\n          <ul class="list-disc list-inside">\n            <li>\n              <a\n                href="https://github.com/getsquares/squares"\n                target="_blank"\n                class="text-blue-600 underline"\n                >Github</a\n              >\n            </li>\n            <li>\n              <a\n                href="https://github.com/getsquares/squares"\n                target="_blank"\n                class="text-blue-600 underline"\n                >Documentation</a\n              >\n            </li>\n          </ul>\n        </div>\n\n        \x3c!-- Dependencies --\x3e\n        <div class="flex flex-col gap-2">\n          <h2 class="text-xl font-bold">Dependencies</h2>\n          <ul class="list-disc list-inside">\n            <li>\n              <a\n                href="https://remixicon.com/"\n                target="_blank"\n                class="text-blue-600 underline"\n                >Remixicon</a\n              >\n            </li>\n            <li>\n              <a\n                href="https://fonts.google.com/icons"\n                target="_blank"\n                class="text-blue-600 underline"\n                >Material Icons</a\n              >\n            </li>\n          </ul>\n        </div>\n\n        \x3c!-- Dependencies --\x3e\n        <div class="flex flex-col gap-2">\n          <h2 class="text-xl font-bold">License</h2>\n          <p>\n            Free to use with some limitations. You are not allowed to use\n            the source code in your own projects.\n          </p>\n        </div>\n        \n        \x3c!-- Purchase --\x3e\n        <div class="flex flex-col gap-4">\n          <div class="flex flex-col gap-2">\n            <h2 class="text-xl font-bold">Purchase</h2>\n            <p>\n              By purchasing to this product, you will support the software\n              now and in the future.\n            </p>\n          </div>\n          <div class="flex gap-2">\n            <div>\n              <button-item title="Purchase" href="#" style="action"></button-item>\n            </div>\n            <div>\n              <button-item title="Cancel" style="ghost"></button-item>\n            </div>\n          </div>\n        </div>\n      </div>\n    ',this.onCancel()}onCancel(){this.querySelector('button-item[style="ghost"]').addEventListener("click",()=>{$("modal-box").deactivate()})}}customElements.define("modal-info",ModalInfo);class ModalLogout extends HTMLElement{constructor(){super()}connectedCallback(){this.innerHTML='\n      <div class="flex flex-col flex-1 gap-6">\n        <div class="flex flex-col gap-6">\n          <div class="flex flex-col gap-2">\n            <h2 class="text-xl font-bold">Logout</h2>\n            <p>\n              You you want to logout?\n            </p>\n          </div>\n          <div class="flex gap-2">\n            <div>\n              <button-item href="#" title="Logout" style="default"></button-item>\n            </div>\n            <div>\n              <button-item title="Cancel" style="ghost"></button-item>\n            </div>\n          </div>\n        </div>\n      </div>\n    ',this.onCancel()}onCancel(){this.querySelector('button-item[style="ghost"]').addEventListener("click",()=>{$("modal-box").deactivate()})}}customElements.define("modal-logout",ModalLogout);class CellEdit extends HTMLElement{constructor(){super()}static get observedAttributes(){return["active","is_null","nullable"]}connectedCallback(){this.toggleActive()}set nullable(e){this.nullableValue=e}get nullable(){return this.nullableValue}set active(e){this.activeValue=e}get active(){return this.activeValue}set is_null(e){this.nullValue=e}get is_null(){return this.nullValue}toggleActive(){this.active?this.thisActivate():this.thisDeactivate()}toggleNull(){this.nullable&&(this.is_null?this.setChecked(!0):this.setChecked(!1))}attributeChangedCallback(e,t,s){if(t!==s)switch(e){case"active":this.active="true"==s,this.toggleActive();break;case"is_null":this.is_null="true"==s,this.toggleNull();break;case"nullable":this.nullable="true"==s}}setChecked(e){$('input[type="checkbox"][name="null"]')&&($('input[type="checkbox"][name="null"]').checked=e)}populate(){const e="true"==this.closest("table-cell").getAttribute("nullable");let t="";e&&(t='\n        <label class="flex gap-2 items-center">\n          <input type="checkbox" class="checkstyle-white form-checkbox" name="null">\n          <div class="italic">NULL</div>\n        </label>\n      ');let s=`\n      ${t}\n      <field-text></field-text>\n    `;this.innerHTML=s,e&&this.onClickNull()}onClickNull(){$('input[type="checkbox"][name="null"]',this).addEventListener("click",e=>{const t=!!e.currentTarget.checked;$("cell-preview",this.closest("table-cell")).setAttribute("is_null",t),this.setAttribute("is_null",t)})}thisActivate(){this.removeAttribute("hidden"),this.populate(),this.toggleNull()}thisDeactivate(){this.setAttribute("hidden","")}activate(){this.setAttribute("active","true")}deactivate(){this.removeAttribute("active")}}customElements.define("cell-edit",CellEdit);class CellPreview extends HTMLElement{constructor(){super()}static get observedAttributes(){return["active","is_null","nullable"]}connectedCallback(){this.innerHTML='\n      <preview-null class="text-opacity-50 text-gray-800 italic" hidden>NULL</preview-null>\n      <preview-value></preview-value>\n    ',this.toggleActive(),this.toggleNull()}set nullable(e){this.nullableValue=e}get nullable(){return this.nullableValue}set active(e){this.activeValue=e}get active(){return this.activeValue}set is_null(e){this.nullValue=e}get is_null(){return this.nullValue}toggleNull(){this.nullable&&$("preview-null",this)&&(this.is_null?this.showNull():this.showValue())}toggleActive(){this.active?this.thisActivate():this.thisDeactivate()}attributeChangedCallback(e,t,s){if(t!==s)switch(e){case"active":this.active="true"==s,this.toggleActive();break;case"is_null":this.is_null="true"==s,this.toggleNull();break;case"nullable":this.nullable="true"==s}}showNull(){$("preview-null",this).removeAttribute("hidden"),$("preview-value",this).setAttribute("hidden","")}showValue(){$("preview-null",this).setAttribute("hidden",""),$("preview-value",this).removeAttribute("hidden")}thisActivate(){this.removeAttribute("hidden")}thisDeactivate(){this.setAttribute("hidden","")}activate(){this.setAttribute("active","true")}deactivate(){this.removeAttribute("active")}}customElements.define("cell-preview",CellPreview);class CellRing extends HTMLElement{constructor(){super()}static get observedAttributes(){return["state"]}connectedCallback(){this.onClick(),this.onDblClick()}attributeChangedCallback(e,t,s){"state"==e&&t!==s&&"default"!=s&&this.xEdges()}onClick(){this.addEventListener("click",e=>{this.handleCellActive(e)})}onDblClick(){this.addEventListener("dblclick",()=>{this.handleCellEdit()})}handleStep(e){switch(e){case"ArrowLeft":this.stepLeft();break;case"ArrowRight":this.stepRight();break;case"ArrowUp":this.stepUp();break;case"ArrowDown":this.stepDown()}}stepLeft(){const e=this.closest("table-cell").previousElementSibling;e&&"TABLE-CELL"===e.tagName&&$("cell-ring",e).handleCellActive()}stepRight(){const e=this.closest("table-cell").nextElementSibling;e&&"TABLE-CELL"===e.tagName&&$("cell-ring",e).handleCellActive()}stepDown(){const e=this.closest("table-cell"),t=cellActiveIndex(e),s=e.parentElement.nextElementSibling;s&&"TABLE-ROW"===s.tagName&&$(`table-cell:nth-child(${t}) cell-ring`,s).handleCellActive()}stepUp(){const e=this.closest("table-cell"),t=cellActiveIndex(e),s=e.parentElement.previousElementSibling;s&&"TABLE-ROW"===s.tagName&&$(`table-cell:nth-child(${t}) cell-ring`,s).handleCellActive()}handleCellTab(e){e.preventDefault(),this.handleStep(e.shiftKey?"ArrowLeft":"ArrowRight")}handleCellActive(){"active"==this.getAttribute("state")||(this.closest("table-cells").deactivateCells(),this.setAttribute("state","active"))}handleCellEdit(){in_field?in_field=!1:(this.setAttribute("state","edit"),$("cell-edit",this.closest("table-cell")).activate())}xEdges(){const e=this.closest("table-cell").previousElementSibling,t=this.closest("table-cell").nextElementSibling;"ROW-SELECT"==e.tagName&&this.classList.add("ml-2px"),t||this.classList.add("mr-2px")}}customElements.define("cell-ring",CellRing);class RowSelect extends HTMLElement{constructor(){super()}static get observedAttributes(){return["value"]}connectedCallback(){this.classList.add("relative","flex","sticky","z-50","left-0","heading-bkg"),this.innerHTML='\n      <label class="tp relative">\n        <input type="checkbox" class="checkstyle form-checkbox" name="test" />\n        <div class="absolute block inset-0 shadow-y"></div>\n      </label>\n    ',this.onClick()}onClick(){this.querySelector("input").addEventListener("input",e=>{const t=e.currentTarget.checked,s=this.closest(".contents").querySelectorAll("row-select, table-cell");t?this.closest("table-row").setAttribute("active","true"):this.closest("table-row").removeAttribute("active"),s.forEach(e=>{t?this.selectOne(e):this.deselectOne(e)}),$("row-actions").toggle()})}selectOne(e){e.classList.add("bg-navy-100"),e.classList.remove("bg-white")}deselectOne(e){e.classList.remove("bg-navy-100"),e.classList.add("bg-white")}}customElements.define("row-select",RowSelect);class TableCell extends HTMLElement{constructor(){super()}static get observedAttributes(){return["value","null"]}connectedCallback(){const e=this.getAttribute("null"),t=this.getAttribute("nullable");this.classList.add("relative","bg-white");const s=this.getAttribute("value");this.innerHTML=`\n      <cell-ring state="default"></cell-ring>\n      <cell-edit is_null="${e}" nullable="${t}"></cell-edit>\n      <cell-preview is_null="${e}" nullable="${t}" active="true"></cell-preview>\n    `,$("preview-value",this).innerHTML=s}}customElements.define("table-cell",TableCell);class TableCells extends HTMLElement{constructor(){super()}static get observedAttributes(){return["value"]}connectedCallback(){this.classList.add("contents"),this.innerHTML=this.template();const e=$("cell-ring",this.closest("table-cells"));e&&e.setAttribute("state","active")}template(){const e=data[table.get(this)],t=e.cols_order;let s="<table-row-ghost></table-row-ghost>",a="";return e.rows.forEach(e=>{a="",t.forEach(t=>{const s=e[t];a+=`<table-cell value="${s}" column="${t}"></table-cell>`}),s+=`\n        <table-row>\n          <row-select></row-select>\n          ${a}\n        </table-row>\n      `}),s}deactivateCells(){this.deactivateCellEdit(),this.deactivateCellRing()}deactivateCellRing(){const e=$('cell-ring[state="active"], cell-ring[state="edit"]',this);e&&e.setAttribute("state","default")}deactivateCellEdit(){const e=$("cell-edit[active]",this);e&&(e.innerHTML="",e.removeAttribute("active"))}}customElements.define("table-cells",TableCells);class TableHeadingCheck extends HTMLElement{constructor(){super()}connectedCallback(){this.classList.add("sticky","top-0","z-[600]","flex","sticky","bg-gray-100","heading-bkg","left-0"),this.innerHTML='\n      <label class="tp relative heading-bkg flex items-center bg-gray-100">\n        <input type="checkbox" class="form-checkbox checkstyle-white" name="test" />\n      </label>\n    ',this.onChange()}keyHtml(){return'<img-svg src="remixicon/key-2-line.svg"></img-svg>'}onChange(){this.querySelector("input").addEventListener("change",e=>{const t=e.currentTarget.checked;$$("row-select").forEach(e=>{e.querySelector("input").checked=t,t?this.selectAll():this.deselectAll()})})}selectAll(){$$("[data-cells] row-select").forEach(e=>{$$("row-select, table-cell",e.closest("table-row")).forEach(t=>{e.selectOne(t)})})}deselectAll(){$$("[data-cells] row-select").forEach(e=>{e.closest(".contents").querySelectorAll("row-select, table-cell").forEach(t=>{e.deselectOne(t)})})}}customElements.define("table-heading-check",TableHeadingCheck);class TableHeading extends HTMLElement{constructor(){super()}static get observedAttributes(){}connectedCallback(){const e=this.getAttribute("key"),t=this.getAttribute("title"),s=this.getAttribute("fieldtype"),a=e?this.keyHtml():"";this.classList.add("tp","heading-bkg","font-bold","flex","gap-2","items-center","text-sm","sticky","top-0","z-[500]","bg-gray-100"),this.innerHTML=`\n      ${a}\n      <div class="flex flex-col gap-1">\n        <div>\n          <div class="text-opacity-60 text-black inline-block py-0.5 text-xs font-normal rounded">${s}</div>\n        </div>\n        ${t}\n      </div>\n    `}keyHtml(){return'<img-svg src="remixicon/key-2-line.svg" classes="w-5 h-5"></img-svg>'}}customElements.define("table-heading",TableHeading);class TableHeadings extends HTMLElement{constructor(){super()}static get observedAttributes(){return["active"]}connectedCallback(){this.classList.add("z-40","contents"),this.innerHTML=this.template()}template(){const e=data[table.get(this)],t=e.cols_order;let s="<table-heading-check></table-heading-check>";return t.forEach(t=>{const a=e.cols[t],i=a.config&&a.config.id?'key="true"':"";s+=`\n        <table-heading title="${t}" fieldtype="${a.meta.Type}" ${i}></table-heading>\n      `}),s}}customElements.define("table-headings",TableHeadings);class TableRowGhost extends HTMLElement{constructor(){super()}static get observedAttributes(){}connectedCallback(){this.setAttribute("hidden",""),this.innerHTML=this.template()}template(){const e=this.templateTableCells();return this.templateFirstTableRow(e)}templateTableCells(){const e=table.get(this),t=data[e];let s="";return temp.insert[e]={defaults:{},data:[]},t.cols_order.forEach(a=>{const i=this.isNullable(t,a),n=this.parseDefault(t,a);t.meta.id!==a&&(temp.insert[e].defaults[a]="true"==i?"":n),s+=this.templateTableCell(i,n,a)}),s}templateFirstTableRow(e){return`\n      <template data-first>\n        <table-row class="contents row-new">\n          <row-select></row-select>\n          ${e}\n        </table-row>\n      </template>\n    `}templateTableCell(e,t,s){return`\n      <table-cell\n        nullable="${e}"\n        value="${t}"\n        null="${e}"\n        column="${s}">\n      </table-cell>\n    `}parseDefault(e,t){let s=e.cols[t].meta.Default;return s=this.trimNull(s),s=this.trimQuotes(s),s}trimNull(e){return null!==e?e:""}trimQuotes(e){return e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e}isNullable(e,t){return"YES"==e.cols[t].meta.Null?"true":"false"}}customElements.define("table-row-ghost",TableRowGhost);class TableRow extends HTMLElement{constructor(){super()}connectedCallback(){this.classList.add("contents")}attributeChangedCallback(e,t,s){t!==s&&"active"==e&&("true"==s?this.thisActivate():this.thisDeactivate())}addRow(){const e=this.closest("pane-main"),t=`${e.getAttribute("database")} ${e.getAttribute("table")}`,s=$("[data-first]",this.closest("pane-main")).innerHTML;this.insertAdjacentHTML("afterend",s);const a=(new Date).getTime();this.nextElementSibling.dataset.index=a,temp.insert[t].data[a]=temp.insert[t].defaults}thisActivate(){this.classList.add("row-primary")}thisDeactivate(){this.classList.remove("row-primary")}activate(){this.setAttribute("active","true")}deactivate(){this.removeAttribute("active")}}customElements.define("table-row",TableRow);class TabItem extends HTMLElement{constructor(){super()}static get observedAttributes(){return["active"]}set database(e){this.databaseValue=e}get database(){return this.databaseValue}set table(e){this.tableValue=e}get table(){return this.tableValue}connectedCallback(){this.database=this.getAttribute("database"),this.table=this.getAttribute("table"),this.setAttribute("title",this.database+"/"+this.table),this.innerHTML=`\n      ${this.table}\n      <img-svg src="remixicon/close.svg" classes="rounded w-5 h-5">\n    `,this.onClick(),this.onCloseClick(),this.onMiddleClick()}deactivate(){this.removeAttribute("active")}activate(){this.setAttribute("active","true")}onClick(){this.on("mousedown",e=>{e.currentTarget===e.target&&1!==e.button&&actions.table.activate(this.database,this.table)})}onCloseClick(){$("img-svg",this).on("click",()=>{this.handleClose()})}onMiddleClick(){this.on("mouseup",e=>{1===e.button&&this.handleClose()})}handleClose(){"true"==this.getAttribute("active")?actions.table.close(this.database,this.table):this.remove()}}customElements.define("tab-item",TabItem);class TabItems extends HTMLElement{constructor(){super()}static get observedAttributes(){return["database","table"]}connectedCallback(){this.classList.add("flex","items-center","gap-2","bg-blueGray-700","overflow-auto","w-full","px-2","self-end")}activate(){this.deactivate(),this.tab(state.database,state.table)?this.tab(state.database,state.table).activate():(this.create(state.database,state.table),this.last().activate())}close(e,t){$(`tab-item[database="${e}"][table="${t}"]`).remove()}deactivate(){const e=$$("tab-item");e&&e.forEach(e=>{e.deactivate()})}create(e,t){$("tab-items").insertAdjacentHTML("beforeend",this.templateTab(e,t,"true"))}templateTab(e,t,s){return`\n    <tab-item database="${e}" table="${t}" active="${s}"></tab-item>`}last(){return $("tab-item:last-child")}tab(e,t){return $(`tab-item[database="${e}"][table="${t}"]`)}}customElements.define("tab-items",TabItems);class ActionbarInfo extends HTMLElement{constructor(){super()}static get observedAttributes(){}connectedCallback(){this.innerHTML='\n      <div data-action>\n        <img-svg src="remixicon/info.svg" classes="w-5 h-5">\n        <div>Info</div>\n      </div>kkk\n    '+this.modal()}attributeChangedCallback(e,t,s){"active"==e&&t!==s&&("true"==s?this.classList.remove("hidden"):this.classList.add("hidden"))}onClick(){}modal(){return'\n    <div class="bg-black inset-0">test</div>\n    '}}customElements.define("actionbar-info",ActionbarInfo);class TopbarItems extends HTMLElement{constructor(){super()}connectedCallback(){this.innerHTML=`\n      <div class="flex gap-2 text-sm text-white py-2">\n        ${this.itemHtml("info","Info","remixicon/question-fill.svg")}\n        ${this.itemHtml("logout","Logout","material-icons/logout_black_24dp.svg")}\n      </div>\n    `,this.onClick()}itemHtml(e,t,s){return`\n      <div title="${t}" data-action="${e}" class="flex items-center gap-1 fill-current px-2 py-1.5 select-none hover:bg-black hover:bg-opacity-20 rounded"\n      >\n      <img-svg src="${s}"></img-svg>\n    </div>\n    `}onClick(){this.querySelectorAll("[data-action]").forEach(e=>{e.addEventListener("click",e=>{const t=e.currentTarget.getAttribute("data-action");["info","logout"].includes(t)&&($("[data-modal-content]").innerHTML=`<modal-${t}></modal-${t}>`,$("modal-box").activate())})})}}customElements.define("topbar-items",TopbarItems);class TopbarWrap extends HTMLElement{constructor(){super()}connectedCallback(){this.innerHTML='\n    <div\n      class="flex items-center justify-between pr-2 text-gray-200 bg-blueGray-700"\n    >\n      <resize-logo>\n        <div class="pl-4 pr-8 flex items-center gap-2 text-2xl text-white uppercase">\n          <img-svg\n            src="remixicon/checkbox-multiple-blank.svg"\n          ></img-svg>\n          <img-svg src="logo.svg" classes="h-5"></img-svg>\n        </div>\n      </resize-logo>\n      <topbar-items></topbar-items>\n    </div>\n    '}}customElements.define("topbar-wrap",TopbarWrap);class FieldText extends HTMLElement{constructor(){super()}static get observedAttributes(){}connectedCallback(){const e=cell.getTempValue(this);this.innerHTML=`\n      <input value="${e}" type="text" class="form-input focus:outline-none focus:ring-yellow-500 focus:ring-offset-1 border-2 focus:ring-2 focus:border-gray-300 border-gray-300">\n    `,this.onKeyup(),this.onEnter(),this.onEscape(),updatePreview($("input",this).value,this),$("input",this).select()}onKeyup(){$("input",this).addEventListener("keyup",e=>{const t=e.currentTarget.value;cell.setTempValue(t,this),updatePreview(t,this),console.log(temp)})}onEnter(){$("input",this).addEventListener("keydown",e=>{"Enter"===e.key&&(e.preventDefault(),leaveEdit(e))})}onEscape(){window.addEventListener("keydown",e=>{if("Escape"!==e.key)return;$('cell-ring[state="edit"]')&&(e.preventDefault(),fieldClose())})}attributeChangedCallback(e,t,s){}}customElements.define("field-text",FieldText);